# Contributing

Thank you for your interest in contributing to this project.

## AI-Assisted Contributions

All commits that involve AI assistance must include an appropriate trailer in the commit message to maintain transparency and proper attribution.

### Trailer Format

Use one of the following trailers depending on how AI was used:

| Trailer | When to Use |
|---------|-------------|
| `Assisted-by:` | AI helped with the work (code review, suggestions, debugging, partial generation) |
| `Generated-by:` | AI generated the majority of the code or content |

### Generic Template

```
<commit subject>

<commit body>

Assisted-by: <AI Tool> <contact>
```

or

```
<commit subject>

<commit body>

Generated-by: <AI Tool> <contact>
```

### Claude Example

For contributions assisted by Claude:

```
Add validation for cluster configuration

Implement schema validation for cluster YAML files to catch
configuration errors before deployment.

Assisted-by: Claude <noreply@anthropic.com>
```

For contributions primarily generated by Claude:

```
Add validation for cluster configuration

Implement schema validation for cluster YAML files to catch
configuration errors before deployment.

Generated-by: Claude <noreply@anthropic.com>
```

## Commit Messages

- Write clear, concise commit subjects (50 characters or less)
- Use the imperative mood ("Add feature" not "Added feature")
- Include a body for non-trivial changes explaining the "why"
- Always include AI attribution trailers when applicable

### Prerequisites

- Python 3.14+
- [uv](https://docs.astral.sh/uv/getting-started/installation/) - Python package and project manager

### Install Dependencies

Clone the repository and sync dependencies:

```bash
git clone https://<REPO>
cd openshift-deployer
uv sync --extra test
```

This installs all runtime dependencies plus test dependencies (`pytest`, `pytest-cov`,
`pytest-order`) into a virtual environment managed by `uv`.

To include development tools (debugger):

```bash
uv sync --extra test --group dev
```

### Running Tests

All Python commands must be run through `uv run` to use the managed virtual environment:

```bash
# Run the full test suite
uv run pytest tests/

# Run a specific test file
uv run pytest tests/utilities/test_host.py

# Run a specific test class or method
uv run pytest tests/utilities/test_host.py::TestHostInit::test_init_defaults -v

# Run with verbose output
uv run pytest tests/ -v
```

Tests are configured in `pyproject.toml` and automatically generate coverage reports.
The minimum coverage threshold is 90%. Coverage HTML reports are written to
`.tests_coverage/`.

### Pre-commit Hooks

Install pre-commit hooks to run linting and formatting checks automatically on each commit:

```bash
uv run pre-commit install
```

Run all hooks against the full codebase:

```bash
uv run pre-commit run --all-files
```

Hook configuration is in `.pre-commit-config.yaml`.

### Code Style

- Line length: 120 characters
- Maximum file length: 500 lines
- Python 3.14+ with type hints (enforced by mypy)
- Use `from __future__ import annotations` in all modules
- 90% minimum test coverage
