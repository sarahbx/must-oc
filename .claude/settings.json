{
  "$schema": "https://json.schemastore.org/claude-code-settings.json",
  "permissions": {
    "allow": [
      "Bash(UV_CACHE_DIR=$TMPDIR/.uv-cache UV_LINK_MODE=copy uv run --all-extras pytest tests 2>&1)",
      "Bash(git status --porcelain)"
    ],
    "ask": [
      "Edit(.claude/agents)"
    ],
    "deny": [
      "Bash(python*)",
      "Bash(pytest*)",
      "Bash(*.claude*)",
      "Bash(curl *)",
      "Bash(UV_NO_CACHE=1 *)",
      "Read(./.env)",
      "Read(./secrets)",
      "Read(./.venv)",
      "Edit(./.git)",
      "Edit(.claude/commands)",
      "Edit(.claude/settings.json)"
    ],
    "disableBypassPermissionsMode": "disable"
  },
  "env": {
    "CLAUDE_CODE_ENABLE_TELEMETRY": "0"
  },
  "sandbox": {
    "enabled": true,
    "allowUnsandboxedCommands": false,
    "autoAllowBashIfSandboxed": false
  },
  "PreToolUse": [
    {
      "matcher": {
        "tools": ["Bash"]
      },
      "hooks": [
        {
          "type": "command",
          "command": "\"$CLAUDE_PROJECT_DIR\"/.claude/hooks/check-dangerous-commands.py",
          "description": "Security check for dangerous Bash commands"
        },
        {
          "type": "command",
          "command": "\"$CLAUDE_PROJECT_DIR\"/.claude/hooks/require-uv-run.py",
          "description": "Python commands must start with 'uv run'"
        }
      ]
    }
  ],
  "Stop": [
    {
      "matcher": {},
      "hooks": [
        {
          "type": "command",
          "command": "uv run ruff check . --fix && uv run ruff format .",
          "description": "Deterministic formatting and linting after AI edits"
        }
      ]
    }
  ]
}
